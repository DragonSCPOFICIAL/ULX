#!/bin/bash

# ulx-pack: Transforma código e imagem em um Aplicativo Nativo (.ulx)
# Uso: ulx-pack <codigo.ulx> <icone.png> <nome_do_app>

if [ "$#" -lt 3 ]; then
    echo "Uso: ulx-pack <codigo.ulx> <icone.png> <nome_do_app>"
    exit 1
fi

SOURCE=$1
ICON=$2
APP_NAME=$3

echo "[ULX-PACK] Criando aplicativo nativo: $APP_NAME"

# 1. Compilar o código usando o ulxc
ulxc "$SOURCE"

# 2. Criar o pacote .ulx (Simulação de fusão de binário + ícone)
# No futuro, isso fará a injeção de recursos no ELF
cp "${SOURCE%.*}" "$APP_NAME.ulx"

# 3. Dar permissão de execução
chmod +x "$APP_NAME.ulx"

echo "[SUCESSO] Aplicativo '$APP_NAME.ulx' criado com foto e biblioteca embutida!"
